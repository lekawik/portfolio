---
import { Image } from "astro:assets";

interface Props {
    title: string;
    techs: string[];
    description: string;
    imagePath: string;
    url: string;
    seeMoreButton: boolean;
}

const { title, techs, description, imagePath, url, seeMoreButton } =
    Astro.props;
const isLocalPublicAsset = imagePath.startsWith("/");
---

<a
    href={seeMoreButton ? url : undefined}
    class={`w-fit h-fit ${seeMoreButton ? "" : "pointer-events-none cursor-default"}`}
>
    <div class="border border-gray">
        {
            isLocalPublicAsset ? (
                <img src={imagePath} alt="" loading="lazy" decoding="async" />
            ) : (
                <Image src={imagePath} alt="" inferSize={true} />
            )
        }

        <div class="border-t border-gray"></div>

        <ul class="flex flex-wrap gap-x-3 gap-y-1 py-1 px-4">
            {
                techs.map((tech) => (
                    <li class="text-body text-secondary-text dark:text-secondary-text-dark font-mono">
                        {tech}
                    </li>
                ))
            }
        </ul>

        <div class="border-t border-gray"></div>

        <div class="py-2 px-4 flex flex-col space-y-1">
            <p
                class="text-title2 font-bold text-primary-text dark:text-primary-text-dark"
            >
                {title}
            </p>

            <p
                class="text-body text-secondary-text dark:text-secondary-text-dark"
            >
                {description}
            </p>
        </div>

        {
            seeMoreButton && (
                <div class="px-4 pb-4">
                    <div class="border w-fit border-gray px-4 py-1">
                        <p class="text-title3 text-primary-text dark:text-primary-text-dark">
                            Voir plus
                        </p>
                    </div>
                </div>
            )
        }
    </div>
</a>
